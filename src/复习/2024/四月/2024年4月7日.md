## 权衡

框架模块之间是有千丝万缕的关系的

要对框架的定位和方向有把控，才能做好后续的模块设计和拆分

学习时也应从全局角度对框架有清晰认知，否则很容易被细节困住，看不清全貌

## 命令式

命令式框架特点：关注过程

符合逻辑直觉 代码描述的是“做事的过程”

命令式开发时，需要维护实现目标的整个过程

性能消耗，dom更新

## 声明式

不需要关注过程，只需要关注入参和返回

声明式性能没命令式高

但是维护性强

性能消耗：dom更新 + 差异化对比

## 虚拟dom

性能比js操作dom低

性能

原生>虚拟>innerhtml

心智

原生>innerhtml>虚拟

维护性

虚拟>innerhtml>原生

## useState

状态：变化的数据

## 运行时、编译时

运行时：

没办法分析？

编译时

能分析，不灵活

运行时+编译时

灵活，

## 设计框架

性能

错误处理

功能开关

代码体积

ts支持

开发体验

构建产物

## 思路

不需要手写？

属性

dom

事件

## 编译

词法解析  将字符串转为能解析的代码块

生成AST树  将代码块转为抽象代码树

 解析AST，生成能运行的代码

## 渲染器

将虚拟dom转为真实dom？

renderer函数

参数 挂载dom 虚拟dom？

## 编译器

将模板转为虚拟dom