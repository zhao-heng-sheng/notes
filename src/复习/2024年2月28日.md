## 不可变数据

不可变：null/undefined/number/string/symbol/boolean

可变：object

为什么使用不可变数据：

- 可变数据会使函数行为变得不可控
- 可变数据使调试成本变高
- 一个可靠的黑盒，应该将变化控制在盒子里，不去改变盒子外的数据

实践

- 参数不要改，要拷贝。修改拷贝后的数据
- 外部数据是只读的，内部数据是可写的

## 快照

为什么使用快照：

- 拷贝意味着重复，重复伴随着冗余
  - 字段多，用的少，冗余就高
  - 当数据量小的时候，拷贝比较简单
  - 数据量大时，拷贝就是性能灾难

快照如何工作：

- 快照本质是记录索引
  - 变化的文件生成新文件，并记录新文件索引
  - 不变的文件一直是旧索引

immutable.js

- 创建一个对象，生成索引树，

immer.js

- 使用proxy对目标对象的写操作进行控制

## 设计原则&高阶函数

DRY：

- 不要重复你自己
  - 多段代码共同的逻辑抽取出来，不同的作为参数传递
  - 用函数承接不变
  - 用参数承接变化
    - 把逻辑作为入参传递，必须把它封装成高阶函数

HOF：

- 高阶函数
- 接受函数作为参数或以函数作为返回值的函数
- 为什么要用
  - 代码